# HTTPS中加密算法的密钥是随机生成吗？和用户帐号密码有什么关联？
<div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemprop="text"><p>从概念上理一下。你这里说的包含了几个概念：</p><p class="ztext-empty-paragraph"><br></p><ol><li>会话密钥。业务数据实际被加密（别人拿到也解不开）和完整性保护（别人不能伪造、篡改、重放密文，发送端不能抵赖）。这个就是题主问的结果。</li><li>“会话密钥管理”密钥。会话密钥会定期协商更新的，协商过程的报文也要保护，一般会有一个管理密钥来保护会话密钥的协商更新。</li><li>认证凭据。双方认可对方是正确、合法的通信对端需要呈上的ID（我是谁，用户名和网站的URL或服务器组织名称）和需要证实持有凭据的证明（密码和网站证书）。认证过程必须绑定一个管理密钥协商，也就是，认证结束后，要让合法的双方共享一个或一组或一对不能让第三方知晓的秘密。这个秘密一般是第2个密钥或者密钥生成材料。这个共享的获得可以是直接用公钥加密的密钥2，或者用其他密钥生成方法。</li></ol><p>在一般通话过程中，如果这3部分间的结合正确，那么除非双方的主机内的认证过程和密钥生成材料都被获取到，才能破解。</p><p class="ztext-empty-paragraph"><br></p><p>如果服务器端和客户端的私钥也丢失的话，那么依赖于公私钥保护的密钥2生成就会出问题。因为他获取了私钥就可以解密所有通话过程，包括公私钥钥保护的"密钥"。</p><p class="ztext-empty-paragraph"><br></p><p>所以在最新的协议中，都用了有PFS（完美前向安全）的保护，也就是必须使用网络上“不传输任何完整密钥密文或明文”的协议。例如，使用DH交换或密钥不可逆生成方式，同时要求删除DH或其他生成方式的材料。这个删除最好是在协商出密钥时立刻删除。这样即使获取到所有的密文，也没法还原。</p><p class="ztext-empty-paragraph"><br></p><p>如果使用公钥加密密钥，那么一般密钥只要满足随机即可。</p><p>如果使用类似DH的密钥交换，因为使用了非对称密钥的原理，在生成随机数的时候会有一些限制，因为这些数学结构中会有一些易破解的密钥。</p><p>如果使用不可逆算法密钥生成，一般是两端各自提供一些随机数，也没有要求。</p><p class="ztext-empty-paragraph"><br></p><p>而使用不可逆算法生成密钥，恰恰有一种密钥生成法，和口令有关，叫“pbe（基于口令的加密算法）”，一般是  HASH（口令，随机数1，随机数2，。。。。。）。这种情况下，有可能被破解。</p><p class="ztext-empty-paragraph"><br></p><p>很多应用也许会采用这种加密的方式。因为这种方式的密钥完全掌握在用户手里，服务器没有任何参与，很适合“个人隐私保护”。</p><p class="ztext-empty-paragraph"><br></p><p>当然https不是这样的。</p></span></div>

[知乎](https://www.zhihu.com/question/304189123/answer/553971324)
